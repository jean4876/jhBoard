<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="post">

	<select id="getAllBoardPost" resultType="postVO"
		parameterType="int">
		select * from test_post where boardId = #{boardId}
	</select>

	<insert id="insertPost" parameterType="postVO">
		insert into
		test_post(boardId, parentPost, postContent, postId, postReg_dt,
		postTitle, postUse, userId )
		VALUES (#{boardId}, NULL,
		#{postContent}, test_post_seq.nextval, sysdate, #{postTitle}, '사용',
		#{userId})
		<selectKey keyProperty="postId">
				select  test_post_seq.currval from dual
		</selectKey>
	</insert>

	<update id="updatePost" parameterType="postVO">
		update test_post set
		postContent = #{postContent}, postTitle = #{postTitle}
		where postId= #{postId}
	</update>

	<update id="notUsePost" parameterType="Integer">
		update test_post set
		postUse = '미사용'
		where postId = #{postId}
	</update>





	<select id="getPost" parameterType="Integer" resultType="postVO">
		select * from test_post where
		postId = #{postId}
	</select>

	<select id="getPostPagingList" parameterType="map"
		resultType="postVO">
		select a.*
		from (select rownum rn, a.*
		from (select a.*
		from test_post a
		where BOARDID = #{boardId}
		order by 1) a) a
		where rn between #{pagesize}*(#{page}-1) + 1 and #{page}*#{pagesize}
	</select>



</mapper>
